@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer Localizer
@{
    ViewData["Title"] = "Đặt vé thành công";
}

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>@ViewData["Title"] - CineTicket</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <link href="~/css/darkmode.css" rel="stylesheet" />
    <link href="~/css/lightmode.css" rel="stylesheet" />
    <link href="~/css/indexbooking.css" rel="stylesheet" />
    <link href="~/css/success.css" rel="stylesheet" />
</head>
<body>
    <div class="container py-5">
        <div class="success-card mx-auto" style="max-width: 650px; position: relative;">
            <!-- Floating background elements -->
            <div class="floating-elements">
                <i class="floating-element fas fa-ticket-alt fa-2x"></i>
                <i class="floating-element fas fa-film fa-2x"></i>
                <i class="floating-element fas fa-popcorn fa-2x"></i>
                <i class="floating-element fas fa-star fa-2x"></i>
            </div>

            <div class="text-center p-5" style="position: relative; z-index: 2;">
                <!-- Success Icon -->
                <div class="success-icon mb-4">
                    <i class="fas fa-check-circle"></i>
                </div>

                <!-- Success Title -->
                <h1 class="success-title">
                    @Localizer["BookingSuccess"] Đặt vé thành công!
                </h1>

                <!-- Success Message -->
                <div class="success-message">
                    <p class="lead mb-2">🎉 Cảm ơn bạn đã sử dụng dịch vụ CineTicket!</p>
                    <p class="mb-2">📧 Thông tin vé đã được gửi đến email của bạn</p>
                    <p class="mb-0">✅ Vui lòng kiểm tra email để xác nhận chi tiết</p>
                </div>

                <!-- Ticket Information -->
                <div class="ticket-info">
                    <h5 class="mb-3">
                        <i class="fas fa-ticket-alt me-2"></i>
                        Thông tin đặt vé
                    </h5>
                    <div class="info-item">
                        <span class="info-label">
                            <i class="fas fa-film me-2"></i>Phim
                        </span>
                        <span class="info-value">@ViewBag.MovieTitle</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">
                            <i class="fas fa-calendar me-2"></i>Ngày chiếu
                        </span>
                        <span class="info-value">@ViewBag.ShowDate</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">
                            <i class="fas fa-clock me-2"></i>Giờ chiếu
                        </span>
                        <span class="info-value">@ViewBag.ShowTime</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">
                            <i class="fas fa-couch me-2"></i>Ghế
                        </span>
                        <span class="info-value">@ViewBag.SeatNumbers</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">
                            <i class="fas fa-money-bill me-2"></i>Tổng tiền
                        </span>
                        <span class="info-value text-warning fw-bold">@ViewBag.TotalAmount VND</span>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <a href="@Url.Action("Index", "Movie")" class="btn btn-gradient me-3">
                        <i class="fas fa-film me-2"></i>@Localizer["BackToMovies"] Xem phim khác
                    </a>
                    <a href="@Url.Action("MyBookings", "Booking")" class="btn btn-outline-light">
                        <i class="fas fa-history me-2"></i>Lịch sử đặt vé
                    </a>
                </div>

                <!-- Additional Info -->
                <div class="mt-4 pt-4" style="border-top: 1px solid rgba(255,255,255,0.2);">
                    <p class="small mb-2">
                        <i class="fas fa-info-circle me-2"></i>
                        Vui lòng đến rạp trước giờ chiếu 15 phút để làm thủ tục
                    </p>
                    <p class="small mb-0">
                        <i class="fas fa-phone me-2"></i>
                        Liên hệ hotline: <strong>1900-xxxx</strong> nếu cần hỗ trợ
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Sound Effect (Optional) -->
    <audio id="successSound" preload="auto">
        <source src="~/sounds/success.mp3" type="audio/mpeg">
    </audio>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Play success sound (if available)
            const successSound = document.getElementById("successSound");
            if (successSound) {
                successSound.volume = 0.3;
                successSound.play().catch(e => console.log("Audio play failed:", e));
            }

            // Auto redirect after 30 seconds (optional)
            setTimeout(() => {
                if (confirm("Bạn có muốn quay về trang chủ không?")) {
                    window.location.href = '@Url.Action("Index", "Movie")';
                }
            }, 30000);
        });
    </script>

    <script src="~/js/movie.js"></script>
</body>
</html>
